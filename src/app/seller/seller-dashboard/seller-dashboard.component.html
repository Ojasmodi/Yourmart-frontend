<app-navbar></app-navbar>
<br>

<div class="container">
    <br>
    <div class="row justify-content-center">
        <button class="btn mat-elevation-z8 btn-info btn-sm text-center" routerLink='/add-product'>Click here to add a
            new product.
        </button>
    </div>
    <br>
    <h2 class="text-center">My Products</h2>
    <div class="search-div">
        <mat-form-field class="search-form-field" floatLabel="never">
            <input matInput [(ngModel)]="searchKey" placeholder="Search for a product" autocomplete="off"
                (keyup)="applyFilter()">
            <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey" (click)="onSearchClear()">
                <mat-icon>close</mat-icon>
            </button>
        </mat-form-field>
    </div>
    <div class="mat-elevation-z8 tableText">
        <mat-table [dataSource]="allProducts" matSort *ngIf="allProducts">
            <ng-container matColumnDef="Primary Image">
                <mat-header-cell *matHeaderCellDef>Primary Image </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <img [src]="element.imageSrc" width="60px" height="60px" />
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="Product Code">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Product Code</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.prodCode}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="Name">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Name</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.prodName}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="Status">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Status</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.prodStatus}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="Category">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Category</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.category}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="MRP">
                <mat-header-cell *matHeaderCellDef mat-sort-header> MRP</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.mrp}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="SSP">
                <mat-header-cell *matHeaderCellDef mat-sort-header> SSP</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.ssp}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="YMP">
                <mat-header-cell *matHeaderCellDef mat-sort-header> YMP</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.ymp}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="CreatedOn">
                <mat-header-cell *matHeaderCellDef >Created On</mat-header-cell>
                <mat-cell *matCellDef="let element">{{element.createdOn | date}} </mat-cell>
            </ng-container> 
            <ng-container matColumnDef="view">
                <mat-header-cell *matHeaderCellDef>View</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <button mat-icon-button matTooltip="View Product" (click)="viewProduct(element.prodId)">
                        <mat-icon class="img-responsive">launch</mat-icon>
                    </button>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="Edit">
                <mat-header-cell *matHeaderCellDef>Edit</mat-header-cell>
                <mat-cell *matCellDef="let element"><button mat-icon-button matTooltip="Edit Product"
                        (click)="editProduct(element.prodId)">
                        <mat-icon class="img-responsive">edit</mat-icon>
                    </button> </mat-cell>
            </ng-container>
            <ng-container matColumnDef="noData">
                <mat-footer-cell *matFooterCellDef colspan="6">
                    noData
                </mat-footer-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
            <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':allProducts!=null}"></mat-footer-row>
        </mat-table>
        <mat-paginator [pageSizeOptions]="[2, 5, 10]" [pageSize]="5" showFirstLastButtons></mat-paginator>
    </div>
</div>
<ngx-spinner></ngx-spinner>